<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Simple Calculator PWA</title>
 <!-- Add your CSS file here (e.g., <link rel="stylesheet" href="styles.css">) -->
</head>
<link rel="manifest" href="/manifest.json">
<body>
<h1>Simple Calculator</h1>
 <label for="integer1">Enter Integer 1:</label>
 <input type="number" id="integer1" required>
 <br><br>
 <label for="operation">Choose an Operation:</label>
 <select id="operation">
 <option value="add">Addition (+)</option>
 <option value="subtract">Subtraction (-)</option>
 <option value="multiply">Multiplication (*)</option>
 <option value="divide">Division (/)</option>
 </select>
 <br><br>
<label for="integer2">Enter Integer 2:</label>
 <input type="number" id="integer2" required>
 <br><br>
 <button onclick="calculate()">Calculate</button>
 <p id="output">Result: </p>
 <!-- <button onclick="performCalculation()">perform</button>
 <p id="output1">Result: </p> -->
 <button id="sendbutton">Send</button>
  <button id="sendbutton1">Send button1</button>
<!--  <p id="output2">what happened: </p> -->
 
 <select onchange="showBreedImage(value)" name="breed_selector" id="breed_selector">
</select>

<div>
<a id="wiki_link" target="_blank"></a>
<div id="breed_json"></div>
</div>

<div>
<img id="breed_image"></img>
</div>
 
 <script src="operate.js"></script>
<script>
 function calculate() {
 const integer1 = parseInt(document.getElementById("integer1").value);
const integer2 = parseInt(document.getElementById("integer2").value);
 const operation = document.getElementById("operation").value;
let result;
switch (operation) {
 case "add":
result = integer1 + integer2;
 break;
 case "subtract":
result = integer1 - integer2;
 break;
 case "multiply":
result = integer1 * integer2;
break;
case "divide":
 result = integer1 / integer2;
break;
default:
result = "Invalid operation";
 }
document.getElementById("output").textContent = "Result: " + result;
}
function performCalculation()
 {
     const integer1 = parseInt(document.getElementById("integer1").value);
       const integer2 = parseInt(document.getElementById("integer2").value);
       const operation = document.getElementById("operation").value;
let result1;
 switch (operation) {
    case "add":
     result1 = integer1 + integer2;
      break;
      case "subtract":
      result1 = integer1 - integer2;
       break;
       case "multiply":
        result1 = integer1 * integer2;
         break;
         case "divide":
          result1 = integer1 / integer2;
          break;
           default:
           result1 = "Invalid operation";
        }
        document.getElementById("output1").textContent = "Result: " + result1;
 // Send the result and input values to the iOS app    
window.webkit.messageHandlers.pwaHandler.postMessage({
     integer1: integer1,
     integer2: integer2,
      operation: operation,
       output: result,
     });}
     // function sendinput(){
     //    window.webkit.messageHandlers.postMessage({result: result});
     //    result2 = 111
     //    document.getElementById("output2").textContent = "what happened: " + result2;
     // }
    //  function perform(){
    // window.webkit.messageHandlers.pwaHandler.postMessage({
    //  integer1: integer1,
    //  integer2: integer2,
    //   operation: operation,
    //    output: result
    //  });
    //  }
     const button = document.getElementById("sendbutton");
     button.addEventListener("click", () => {
        const datatosend = {message: "hello harish edited data is sent"};
        // const datatosend = {"hello something happening"};
        senddata(datatosend);
     });

      const button1 = document.getElementById("sendbutton1");
     button1.addEventListener("click", () => {
      const stringvalue = "hello harish";
      const intvalue = 13
      const datasending = {
      stringdata : stringvalue,
       intdata : intvalue,
      };
      const jsonstring = JSON.stringify(datasending);
      senddata(jsonstring);

      urlfetch();
      
      // const sampledata = "hello harish data is sent check it";
        const datatosend1 = {message: "hello harish data is sent check it",message: 11};
      const sampledata = {
       message : "hello harish data is sent check it",
     integer1 : integer1,
     integer2 : integer2,
       output : result
     }
        // senddata(datatosend1);
      // window.webkit.messageHandlers.pwaHandler.postMessage({message: "hello harish data is sent check it"});
      // senddata(sampledata);
     });
     function senddata(data){
        window.webkit.messageHandlers.pwaHandler.postMessage(data);
     }

 function urlfetch(){
 
 const url = `https://api.thecatapi.com/v1/breeds`;
const api_key = "DEMO_API_KEY"
let storedBreeds = []

 fetch(url,{headers: {
      'x-api-key': api_key
    }})
 .then((response) => {
   return response.json();
 })
.then((data) => {
   
   //filter to only include those with an `image` object
   data = data.filter(img=> img.image?.url!=null)
   
  storedBreeds = data;
   
   for (let i = 0; i < storedBreeds.length; i++) {
    const breed = storedBreeds[i];
    let option = document.createElement('option');
     
     //skip any breeds that don't have an image
     if(!breed.image)continue
     
    //use the current array index
    option.value = i;
    option.innerHTML = `${breed.name}`;
document.getElementById('breed_selector').appendChild(option);
    
    }
   //show the first breed by default
   showBreedImage(0)
})
.catch(function(error) {
   console.log(error);
});

function showBreedImage(index)
{ 
  document.getElementById("breed_image").src= storedBreeds[index].image.url;
  
  document.getElementById("breed_json").textContent= storedBreeds[index].temperament
  
  
  document.getElementById("wiki_link").href= storedBreeds[index].wikipedia_url
  document.getElementById("wiki_link").innerHTML= storedBreeds[index].wikipedia_url
}
 }
 
if('ServiceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js');
      }
 </script>
</body>
</html>
